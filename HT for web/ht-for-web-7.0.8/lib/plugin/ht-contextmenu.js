!function(z,O){"use strict";var o="ht",_=z[o],P="position",G="absolute",$="px",l="left",s="top",Q="innerHTML",q="className",w="width",S="height",v="0",V="display",n="none",H="visibility",D="user-select",k="margin",F="padding",e=null,M=_.Color,y=_.Default,x=y.getInternal(),u=z.setTimeout,Y=z.setInterval,T=z.clearTimeout,N=z.clearInterval,K=z.parseInt,X=y.isLeftButton,C=y.isDragging,B=y.startDragging,I=y.getDistance,E=y.isTouchable,h=M.widgetIconHighlight,c=M.widgetIconBorder,t=M.widgetIconGradient,J=function(){return document},b=function(a,R){return a.querySelectorAll(R)},j=function(i){var b=J().createElement(i);return"ul"===i&&(p(b,P,"relative"),p(b,k,v),p(b,F,v),p(b,"list-style",n),p(b,"box-sizing","border-box"),p(b,"-moz-box-sizing","border-box"),p(b,V,"inline-block"),p(b,"vertical-align","text-bottom"),p(b,"border","1px solid "+y.contextMenuBorderColor),p(b,"box-shadow","0 0 16px 1px "+y.contextMenuShadowColor),p(b,"overflow","hidden"),y.contextMenuBorderRadius&&p(b,"border-radius",y.contextMenuBorderRadius+$)),b},m=function(C){var N=C.touches[0];return N?N:C.changedTouches[0]},U=function(){return j("div")},i=function(){return j("canvas")},p=function(S,n,u){S.style.setProperty(n,u,e)},f=function(T,H,o){y.def(_.widget[T],H,o)},R=function(y,V){y.appendChild(V)},d=function(Z,z){Z.removeChild(z)},g=x.addEventListener,Z=x.removeEventListener;x.addMethod(y,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:c},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:h}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:c},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:h,gradient:y.imageGradient,gradientColor:t,background:h}]},contextMenuLabelFont:(E?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var a=function(Q){var x=this,F=Q._view;if(x.$11b=Q,x.addListeners(),g(F,"contextmenu",function(H){H.preventDefault()}),!E){var T=x.$37b=x.$36b.bind(x);g(F,"mouseover",T),g(F,"mouseout",T)}};y.def(a,O,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(v){if(y.preventDefault(v),X(v)){for(var b=this,s=b.$11b,k=b.getView(),Z=k.children,x=0;x<Z.length;x++){var z=Z[x],F=z.$24b,o=z.$25b;if(F&&F.contains(v.target))return s.scrollUp(z),b.$28b=u(function(){b.$29b=Y(function(){s.scrollUp(z)},100)},500),B(b,v),void 0;if(o&&o.contains(v.target))return s.scrollDown(z),b.$28b=u(function(){b.$29b=Y(function(){s.scrollDown(z)},100)},500),B(b,v),void 0}E&&(v=m(v)),b.$30b={x:v.pageX,y:v.pageY}}},handle_mousedown:function(B){this.handle_touchstart(B)},handle_touchend:function(f){if(X(f)){var M=this,k=M.$30b,Z=E?{x:m(f).pageX,y:m(f).pageY}:{x:f.pageX,y:f.pageY};if(!k||I(k,Z)>1)return delete M.$30b,void 0;for(var D=M.getView(),h=M.$11b,b=f.target,K=e,x=e,g=h._items,o=D.$26b,L=0;L<o.length;L++)if(x=o[L],x.contains(b)){K=x.getAttribute("data-id");break}if(K&&g){var S=h.$17b(g,function(h){return h._id===K});if(S){var W=!1;S.disabled instanceof Function?W=S.disabled.call(h,S):S.disabled===!0&&(W=!0),W||(S.items?E&&M.$36b(x,!0):h.$1b(S,f))}}delete M.$30b}},$36b:function(Y,N){if(!C()){var o,K=this,L=K.$11b,x=K.getView(),k=L.$20b||x.children[0],I=L.$19b,G=x.$26b,D=x.children,g=Y.target,X=x.getBoundingClientRect(),j=y.getWindowInfo(),n=j.width,M=j.height,u=function(W){for(var w=0;w<D.length;w++){var g=D[w],l=new RegExp(W+"$"),U=g[q];if(U&&(l.test(U)||U.indexOf(W+" ")>=0))return g}},i=function(i){for(var C=0;C<G.length;C++){var P=G[C],c=new RegExp(i+"$"),S=P[q];if(S&&(c.test(S)||S.indexOf(i+" ")>=0))return P}},J=function(m){var J=i("menu-item"+m.$45b),R=J.getBoundingClientRect(),C=R.top-X.top,g=R.left-X.left;p(m,s,C+$),p(m,l,g+R.width+$);var q=m.getBoundingClientRect(),F=q.top,P=q.left,k=q.height,o=q.width,f=F+k+2,r=P+o+2;f>M&&p(m,s,C+M-f+$),r>n&&p(m,l,g-o+$)};if(N)o=Y;else{if("mouseover"===Y.type){for(var b=0;b<G.length;b++){var t=G[b];if(t.contains(g)){o=t;break}}if(!o&&I){var e=I.parentNode,F=u("submenu"+I.getAttribute("data-id"));(F&&F.contains(g)||e&&e.contains(g))&&(o=I)}}else if("mouseout"===Y.type){for(var w=!1,c=Y.relatedTarget,b=0;b<D.length;b++){var B=D[b];if("hidden"!==B.style.visibility&&B.contains(c)){w=!0;break}}if(w)return}!o&&k&&(o=i("menu-item"+(k.$45b||"NaN")))}if(o!=I){if(I)for(var v=I;v;){if(v[q]=v[q].replace(" menu-item-hover",""),v[q].indexOf("disabled")<0){var R=L.getItemByProperty("_id",v.getAttribute("data-id"));null!=R.background?R.background instanceof Function?p(v,"background-color",R.background.call(L,R)):p(v,"background-color",R.background):p(v,"background-color",y.contextMenuBackground),p(v,"color",y.contextMenuLabelColor)}var P=u("submenu"+v.getAttribute("data-id"));P&&p(P,H,"hidden");var r=v.parentNode;v=i("menu-item"+(r.$45b||"NaN"))}if(o){for(var d=o,z=[];d;){d[q]+=" menu-item-hover",d[q].indexOf("disabled")<0&&(p(d,"background-color",y.contextMenuHoverBackground),p(d,"color",y.contextMenuHoverLabelColor));var m=u("submenu"+d.getAttribute("data-id"));m&&(p(m,H,"visible"),z.push(m));var r=d.parentNode;d=i("menu-item"+(r.$45b||"NaN"))}z.reverse(),z.forEach(function(P){J(P)})}}L.$19b=o,L.$20b=o?o.parentNode:x.children[0]}},handle_mouseup:function(g){this.handle_touchend(g)},handleWindowTouchEnd:function(){var t=this;t.$28b!=e&&(T(t.$28b),delete t.$28b),t.$29b!=e&&(N(t.$29b),delete t.$29b),delete t.$34b,delete t.$30b,delete t.$35b},handleWindowMouseUp:function(q){this.handleWindowTouchEnd(q)},handle_mousemove:function(e){this.handle_touchmove(e)},handle_touchmove:function(U){if(!C()&&X(U)){for(var i=this,M=i.getView().children,a=e,f=0;f<M.length;f++){var F=M[f];if(F.contains(U.target)){a=F;break}}var q=i.$30b,V=E?{x:m(U).pageX,y:m(U).pageY}:{x:U.pageX,y:U.pageY};a&&q&&I(q,V)>2&&(B(i,U),i.$34b=a,i.$35b=a.$18b)}},handleWindowTouchMove:function(a){a.preventDefault();var P=this,h=P.$11b,Q=P.$34b,f=P.$35b,B=P.$30b;if(B&&Q){var S=E?{x:m(a).pageX,y:m(a).pageY}:{x:a.pageX,y:a.pageY},s=S.y-B.y;s>0?h.scrollUp(Q,Q.$18b-(f-s)):h.scrollDown(Q,f-s-Q.$18b)}},handleWindowMouseMove:function(Y){this.handleWindowTouchMove(Y)},$10b:function(B,g){B.preventDefault();for(var s=this,W=s.getView().children,X=e,k=0;k<W.length;k++){var m=W[k];if(m.contains(B.target)){X=m;break}}if(X){var R=this.$11b,p=R.getRowHeight();Math.abs(g)>.05&&(g>0?R.scrollUp(X,g*p):0>g&&R.scrollDown(X,-g*p))}},handle_mousewheel:function(p){this.$10b(p,p.wheelDelta/40)},handle_DOMMouseScroll:function(r){this.$10b(r,-r.detail)},$44b:function(K){this.getView().contains(K.target)||this.$11b.hide()},$41b:function(o){this.$11b.show(o)},$4b:function(L,g){var X=this.$11b;if(g=g||X._items,g&&g.length&&L.keyCode){var B=[L.keyCode];L.shiftKey&&B.push(16),L.ctrlKey&&B.push(17),L.altKey&&B.push(18),/mac/.test(z.navigator?z.navigator.userAgent.toLowerCase():"")?L.metaKey&&B.push(17):L.metaKey&&B.push(91),B.sort();var m=B.join(),v=X.$17b(g,function(s){if(s.key){var O=s.key.slice(0);return O.sort(),m===O.join()}});if(v){v.preventDefault!==!1&&L.preventDefault();var l=!1;v.disabled instanceof Function?l=v.disabled.call(X,v):v.disabled===!0&&(l=!0),l||X.$1b(v,L)}}},$39b:function(N){var D=this,A=m(N);D.$32b={x:A.pageX,y:A.pageY}},$38b:function(b){var z=this,R=m(b);z.$31b={x:R.pageX,y:R.pageY},z.$33b=u(function(){z.$31b&&(z.$32b?I(z.$31b,z.$32b)<10&&z.$11b.show(b):z.$11b.show(b)),delete z.$33b,delete z.$31b,delete z.$32b},600)},$40b:function(){var S=this;S.$33b!=e&&(T(S.$33b),delete S.$33b,delete S.$31b,delete S.$32b)}}),_.widget.ContextMenu=function(Q){var X=this,W=X._view=x.createView(null,X);W[q]="ht-widget-contextmenu",X.setItems(Q),X.$13b=new a(X),p(W,"font",y.contextMenuLabelFont),p(W,P,G),p(W,"cursor","default"),p(W,"-webkit-"+D,n),p(W,"-moz-"+D,n),p(W,"-ms-"+D,n),p(W,D,n),p(W,"box-sizing","border-box"),p(W,"-moz-box-sizing","border-box"),y.baseZIndex!=e&&p(W,"z-index",K(y.baseZIndex)+2+""),X.$3b=function(u){X.$13b.$4b(u)}},f("ContextMenu",O,{$5b:0,_items:e,$21b:e,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var F=this,x=F._enableGlobalKey;x===!1&&(g(J(),"keydown",F.$3b),F._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,Z(J(),"keydown",this.$3b)},setItems:function(A){this._items=A},getItems:function(){return this._items},setVisibleFunc:function(I){this.$16b=I},setLabelMaxWidth:function(Y){this.$43b=Y},$1b:function(E,y){var q=this;if("check"===E.type)E.selected=!E.selected;else if("radio"===E.type){var K=E.groupId;q.$17b(q._items,function(d){d.groupId===K&&(d.selected=!1)}),E.selected=!0}if(q.hide(),E.action)E.action.apply(E.scope||q,[E,y]);else if(E.href){var S=E.linkTarget||"_self";z.open(E.href,S)}},getItemById:function(V){return this.getItemByProperty("id",V)},setItemVisible:function(W,i){var o=this.getItemById(W);o&&(o.visible=i)},getItemByProperty:function(p,F,t){var w=this;if(t=t||w._items,!t||0===t.length)return e;var A=w.$17b(t,function(J){return J[p]===F});return A||e},scrollUp:function(S,c){var $=this;if(c=c==e?20:c,c=K(c),0!==c){var x=0;S.$18b>c&&(x=S.$18b-c),$.$42b(S,x),S.scrollTop=x,S.$18b=x}},scrollDown:function(p,I){var F=this;if(I=I==e?20:I,I=K(I),0!==I){var b=p.$22b,M=p.$23b,n=b-M;M+p.$18b+I<b&&(n=p.$18b+I),F.$42b(p,n),p.scrollTop=n,p.$18b=n}},$42b:function(T,F){F=F==e?T.$18b:F;var Z=T.$24b,k=T.$25b;Z&&(p(Z,"top",F+$),0==F?p(Z,V,n):p(Z,V,"block")),k&&(p(k,"bottom",-F+$),F==T.$22b-T.$23b?p(k,V,n):p(k,V,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(n,B){for(var z=0;z<n.length;z++){var y=n[z];if(B(y))return y;if(y.items){var O=this.$17b(y.items,B);if(O)return O}}},$2b:function(A,h){for(var c=this,J=0;J<A.length;J++){c.$5b++;var E=A[J];if(E.visible!==!1)if(y.isFunction(E.visible)&&E.visible()===!1)this._clearItemId(E);else if(!c.$16b||c.$16b.call(c,E)){var B=j("li"),L=c.$5b+"";if(p(B,"white-space","nowrap"),p(B,V,"block"),"separator"===E||E.separator===!0){var I=U();I[q]="separator",p(I,S,y.contextMenuSeparatorWidth+$),p(I,"background",y.contextMenuSeparatorColor),R(B,I)}else{E._id=L,B.setAttribute("data-id",L);var b=j("span"),s=j("span"),l=i(),o=U();if(p(b,V,"inline-block"),p(b,S,"1.2em"),p(s,V,"inline-block"),p(s,S,"1.2em"),p(s,"line-height","1.2em"),l[q]="prefix",p(l,V,"inline-block"),p(l,w,"1em"),p(l,S,"1em"),p(l,"vertical-align","middle"),p(l,k,"0 0.2em"),"check"===E.type&&E.selected?l[q]+=" check-prefix":"radio"===E.type&&E.selected&&(l[q]+=" radio-prefix"),R(B,l),E.icon){var r=i();r[q]="contextmenu-item-icon",p(r,V,"inline-block"),p(r,S,"1.2em"),p(r,w,"1.2em"),p(r,"margin-right","0.2em"),p(r,"float","left"),r.$50b=E.icon,r._item=E,R(b,r)}if(s[Q]=E.label,R(b,s),R(B,b),o[q]="suffix",p(o,V,"inline-block"),p(o,"margin-left","1em"),p(o,"margin-right","0.4em"),p(o,"text-align","right"),p(o,"font-size","75%"),E.items&&(o[Q]=y.contextMenuSubmenuMark),E.suffix&&(o[Q]=E.suffix),R(B,o),B[q]="menu-item menu-item"+L,null!=E.background?E.background instanceof Function?p(B,"background-color",E.background.call(c,E)):p(B,"background-color",E.background):p(B,"background-color",y.contextMenuBackground),p(B,"color",y.contextMenuLabelColor),p(B,F,"3px 0"),E.disabled instanceof Function){var n=E.disabled.call(c,E);n&&(B[q]+=" disabled",p(B,"color",y.contextMenuDisabledLabelColor))}else E.disabled&&(B[q]+=" disabled",p(B,"color",y.contextMenuDisabledLabelColor));if(E.items){c.$21b||(c.$21b=new _.List);var N=j("ul");N[q]="submenu"+L,N.$45b=L,p(N,H,"hidden"),p(N,P,G),R(c._view,N),c.$21b.add(N),c.$2b(E.items,N)}}R(h,B)}else this._clearItemId(E);else this._clearItemId(E)}},rebuild:function(){var k=this,G=k._items,u=k._view;if(u&&(u[Q]="",k.$21b=e,k.$5b=0,k.$19b=e,k.$20b=e,u.$26b=e,G&&0!==G.length)){var X=j("ul",k._r);R(u,X),k.$2b(G,X)}},addTo:function(f){if(f){var l=this,V=l.$13b;if(l.$12b=f,l.$9b=function(E){V.$44b(E)},l.$27b=function(f){V.$41b(f)},E){var Q=l.$6b=function(O){V.$38b(O)},z=l.$7b=function(X){V.$39b(X)},O=l.$8b=function(a){V.$40b(a)};g(f,"touchstart",Q,!0),g(f,"touchmove",z),g(f,"touchend",O)}else g(f,"contextmenu",l.$27b)}},showOnView:function(S,h,K){S=S.getView?S.getView():S;var g=y.getWindowInfo(),Z=S.getBoundingClientRect();this.show(Z.left+g.left+h,Z.top+g.top+K)},show:function(u,W,B){var x=this,B=B==e?!0:!1,z=x._view;if(z){if(x.invalidate(),1===arguments.length){var F=u;if(E){var O=m(F);u=O.pageX,W=O.pageY}else u=F.pageX,W=F.pageY}var Y=y.getWindowInfo(),Z=Y.width,t=Y.height,h=Y.left,D=Y.top,r={pageX:u,pageY:W,clientX:u-h,clientY:W-D,target:1,originEvent:F},c=r.clientX,o=r.clientY,_=function(a){a.style.height=t-6+$;var C=U(),W=U(),H=function(s){p(s,P,G),p(s,"text-align","center"),p(s,w,"100%"),p(s,"font-size",10+$),p(s,"padding","2px 0"),p(s,"border","0px solid "+y.contextMenuScrollerBorderColor),p(s,"background-color",y.contextMenuScrollerColor1),s.style.backgroundImage="-webkit-linear-gradient(top, "+y.contextMenuScrollerColor1+", "+y.contextMenuScrollerColor2+")",s.style.backgroundImage="linear-gradient(to bottom, "+y.contextMenuScrollerColor1+", "+y.contextMenuScrollerColor2+")"};C[q]="menu-arrow-item menu-arrow-item-top",W[q]="menu-arrow-item menu-arrow-item-bottom",H(C),p(C,"top",v),p(C,"left",v),p(C,"border-bottom-width",1+$),C[Q]="▲",H(W),p(W,"bottom",v),p(W,"left",v),p(W,"border-top-width",1+$),W[Q]="▼",a.$24b=C,a.$25b=W,a.$18b=a.scrollTop,a.$22b=a.scrollHeight,a.$23b=a.clientHeight,R(a,C),R(a,W),x.$42b(a)};x.beforeShow&&x.beforeShow(r);var a=x._items;if(a&&(F&&F.preventDefault(),a.length)){x.rebuild(),y.appendToScreen(z),z.$26b=b(z,".menu-item");var C=z.children[0];C.offsetHeight>t&&_(C);var K=o+(B?1:0),f=c+(B?1:0),d=function(s){for(var O=0,c=0,S=0,C=x.$43b;S<s.children.length;S++){var z=s.children[S];if(z.getAttribute("data-id")){var F=z.children[1],N=z.children[2],B=F.children;if(C){var r=B[0];B.length>1&&(r=B[1]),r.offsetWidth>C&&(r[Q]="<marquee scrollamount='3'>"+r[Q]+"</marquee>",r.children[0].style.verticalAlign="text-bottom",p(r,w,C+$),p(r,V,"inline-block"))}var D=F.offsetWidth,u=N.offsetWidth;D>O&&(O=D),u>c&&(c=u)}}for(S=0;S<s.children.length;S++){var z=s.children[S];if(z.getAttribute("data-id")){var F=z.children[1],N=z.children[2],f=F.children[0],Y=F.children[1];!Y&&f.style.width&&p(f,w,O+$),p(F,w,O+$),p(N,w,c+$)}}};d(C);var H=o+3+z.offsetHeight,A=c+3+z.offsetWidth;H>t?p(z,s,K-(H-t)+D+$):p(z,s,K+D+$),A>Z?p(z,l,f-(A-Z)+h+$):p(z,l,f+h+$);var L=x.$21b;L&&L.each(function(B){d(B),B.offsetHeight>t&&_(B)}),x.$9b&&g(J(),E?"touchstart":"mousedown",x.$9b,!0),x.afterShow&&x.afterShow(r),x.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=e:!1},getRelatedView:function(){return this.$12b},hide:function(){var n=this,G=n._view;G&&G.parentNode&&(d(G.parentNode,G),Z(J(),E?"touchstart":"mousedown",n.$9b,!0),n.afterHide&&n.afterHide())},dispose:function(){var u=this,b=u.$12b,K=u._view;K&&(K.parentNode&&d(K.parentNode,K),u.disableGlobalKey(),b&&(E?(Z(b,"touchstart",u.$6b,!0),Z(b,"touchmove",u.$7b),Z(b,"touchend",u.$8b)):Z(b,"contextmenu",u.$27b)),u._view=u._items=u.$21b=u.$19b=u.$12b=u.beforeShow=u.afterShow=u.afterHide=u.$9b=u.$3b=u.$6b=u.$7b=u.$8b=u.$27b=e)},$46b:function(I,l,r,J,V){var z=x.initContext(I);x.translateAndScale(z,0,0,1),z.clearRect(0,0,r,J),y.drawStretchImage(z,y.getImage(l),"fill",0,0,r,J,V,this),z.restore()},$47b:function(){var Q,q,V,R=this,U=R._view;if(R.isShowing()){var T=b(U,".check-prefix");for(V=0;V<T.length;V++){var N=T[V];Q=N.clientWidth,q=N.clientHeight,N.$48b=Q,N.$49b=q,x.setCanvas(N,Q,q)}var r=b(U,".radio-prefix");for(V=0;V<r.length;V++){var s=r[V];Q=s.clientWidth,q=s.clientHeight,s.$48b=Q,s.$49b=q,x.setCanvas(s,Q,q)}var o=b(U,".contextmenu-item-icon");for(V=0;V<o.length;V++){var y=o[V];Q=y.clientWidth,q=y.clientHeight,y.$48b=Q,y.$49b=q,x.setCanvas(y,Q,q)}}},validateImpl:function(){var Z,v,P,m=this,o=m._view;if(m.isShowing()){var E=b(o,".check-prefix");for(P=0;P<E.length;P++){var U=E[P];Z=U.$48b,v=U.$49b,Z&&v&&m.$46b(U,y.contextMenuCheckIcon,Z,v)}var d=b(o,".radio-prefix");for(P=0;P<d.length;P++){var W=d[P];Z=W.$48b,v=W.$49b,Z&&v&&m.$46b(W,y.contextMenuRadioIcon,Z,v)}var Q=b(o,".contextmenu-item-icon");for(P=0;P<Q.length;P++){var q=Q[P];Z=q.$48b,v=q.$49b,Z&&v&&m.$46b(q,y.getImage(q.$50b),Z,v,q._item)}}},_clearItemId:function(B){var E=this;delete B._id,B.items&&B.items.forEach(function(b){E._clearItemId(b)})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);